<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Receipt</title>
    <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
    
    <style>
        /* --- RESET --- */
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            background-color: #222; /* Meja gelap */
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            padding-top: 40px;
            font-family: 'VT323', monospace;
            overflow-x: hidden;
        }

        /* --- PRINTER HEAD (CELAH KELUAR) --- */
        .printer-mouth {
            width: 340px;
            height: 25px;
            background: linear-gradient(to bottom, #111, #333);
            border-radius: 5px;
            border-bottom: 3px solid #000;
            position: relative;
            z-index: 10;
            box-shadow: 0 10px 20px rgba(0,0,0,0.8);
        }

        /* --- KERTAS STRUK (WADAH ANIMASI) --- */
        .paper-roll {
            width: 300px;
            /* Awalnya 0, nanti JS yang ubah */
            height: 0; 
            overflow: hidden;
            transition: height 5s linear; /* Ngeprint pelan-pelan */
            position: relative;
            z-index: 5;
        }

        /* --- FISIK KERTAS --- */
        .receipt-body {
            background-color: #fffdf0; /* Warna kertas thermal (agak kuning dikit) */
            width: 100%;
            padding: 20px 20px 40px 20px;
            color: #2d2d2d; /* Tinta gak hitam pekat */
            font-size: 1.2rem; /* Ukuran font struk standar */
            line-height: 1.1;
            position: relative;
            box-shadow: 0 5px 10px rgba(0,0,0,0.3);
            
            /* Tekstur Noise Kertas (Biar gak flat) */
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.05'/%3E%3C/svg%3E");
        }

        /* EFEK SOBEKAN BAWAH (JAGGED) */
        .receipt-body::after {
            content: "";
            position: absolute;
            bottom: -10px; left: 0;
            width: 100%;
            height: 10px;
            background: #fffdf0;
            /* Pola Zigzag CSS Murni */
            background-image: linear-gradient(135deg, #222 25%, transparent 25%), 
                              linear-gradient(225deg, #222 25%, transparent 25%);
            background-position: 0 0;
            background-size: 20px 20px; /* Ukuran gigi */
            background-color: transparent; 
            transform: rotate(180deg); /* Dibalik biar giginya ke bawah */
        }

        /* --- KOMPONEN DALAM --- */
        .center { text-align: center; }
        .left { text-align: left; }
        .right { text-align: right; }
        .bold { font-weight: bold; }
        
        .dashed-line {
            display: block;
            margin: 10px 0;
            overflow: hidden;
            white-space: nowrap;
        }

        /* HEADER */
        .store-name {
            font-size: 1.8rem;
            margin-bottom: 5px;
            letter-spacing: 2px;
        }

        /* FOTO THERMAL STYLE */
        .photo-box {
            width: 100%;
            height: 250px;
            background: #000;
            margin: 15px 0;
            /* Filter Kunci: Grayscale + High Contrast + Brightness */
            filter: grayscale(100%) contrast(1.5) brightness(1.1);
            overflow: hidden;
            border: 2px solid #2d2d2d;
        }
        .photo-box img {
            width: 100%; height: 100%;
            object-fit: cover;
            /* Mix blend biar nyatu sama kertas */
            mix-blend-mode: multiply; 
        }

        /* LIST ITEMS */
        .row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
        }

        /* PESAN */
        .message {
            margin-top: 20px;
            text-align: justify;
            white-space: pre-wrap; /* Biar enter kebaca */
            font-size: 1.1rem;
        }

        /* BARCODE */
        .barcode {
            margin-top: 25px;
            height: 50px;
            background: repeating-linear-gradient(
                to right,
                #000 0px, #000 2px,
                transparent 2px, transparent 4px,
                #000 4px, #000 8px
            );
            width: 80%;
            margin-left: auto;
            margin-right: auto;
        }

        /* --- TOMBOL CETAK --- */
        .print-btn {
            margin-top: 30px;
            padding: 15px 30px;
            background: #eee;
            border: 2px solid #444;
            font-family: 'VT323', monospace;
            font-size: 1.5rem;
            cursor: pointer;
            box-shadow: 4px 4px 0 #000; /* Shadow kasar */
            transition: 0.1s;
        }
        .print-btn:active {
            transform: translate(2px, 2px);
            box-shadow: 2px 2px 0 #000;
        }

    </style>
</head>
<body>

    <div class="printer-mouth"></div>

    <div class="paper-roll" id="paper">
        <div class="receipt-body" id="content">
            
            <div class="center">
                <div class="store-name">CAFE OF LOVE</div>
                <div>Jl. Hati No. 1, Purwokerto</div>
                <div>Telp: 0813-XXXX-XXXX</div>
            </div>

            <div class="dashed-line">--------------------------------</div>

            <div class="row">
                <span>TGL: <span id="tgl"></span></span>
                <span>JAM: <span id="jam"></span></span>
            </div>
            <div class="row">
                <span>KSR: AFDHI</span>
                <span>NO: #002702</span>
            </div>

            <div class="dashed-line">--------------------------------</div>

            <div class="photo-box">
                <img src="foto.jpg" alt="Struk Foto">
            </div>

            <div class="center" style="margin-bottom: 10px;">** BIRTHDAY GIRL **</div>

            <div class="row">
                <span>1x CINTA TULUS</span>
                <span>RP 0</span>
            </div>
            <div class="row">
                <span>1x KESABARAN</span>
                <span>RP 0</span>
            </div>
            <div class="row">
                <span>1x SENYUM MANIS</span>
                <span>RP 0</span>
            </div>
            <div class="row">
                <span>50kg RINDU</span>
                <span>RP 0</span>
            </div>

            <div class="dashed-line">--------------------------------</div>

            <div class="row bold" style="font-size: 1.4rem;">
                <span>TOTAL BAYAR</span>
                <span>JIWAKU</span>
            </div>

            <div class="dashed-line">--------------------------------</div>

            <div class="message">
Hai Yolanda,
Selamat ulang tahun.

Struk ini tidak bisa direfund, sama seperti perasaanku. Terima kasih sudah jadi variabel konstan di duniaku yang penuh ketidakpastian.

Semoga bahagiamu hari ini valid dan permanen.

Love,
Afdhi
            </div>

            <div class="center" style="margin-top: 30px;">
                <div>TERIMA KASIH SUDAH LAHIR</div>
                <div>SIMPAN STRUK INI SEBAGAI BUKTI</div>
            </div>

            <div class="barcode"></div>
            <div class="center" style="font-size: 0.8rem;">||| || ||| || ||||</div>
            
            <div style="height: 20px;"></div>

        </div>
    </div>

    <button class="print-btn" id="btn" onclick="printStruk()">TEKAN UNTUK CETAK</button>

    <script>
        // ISI TANGGAL
        const now = new Date();
        document.getElementById('tgl').innerText = now.toLocaleDateString('id-ID');
        document.getElementById('jam').innerText = now.toLocaleTimeString('id-ID', {hour: '2-digit', minute:'2-digit'});

        // FUNGSI PRINT
        function printStruk() {
            const paper = document.getElementById('paper');
            const content = document.getElementById('content');
            const btn = document.getElementById('btn');

            // Ambil tinggi asli konten
            const h = content.scrollHeight;

            // Jalankan animasi
            paper.style.height = h + 'px';
            
            // Ubah tombol
            btn.innerText = "MENCETAK...";
            btn.disabled = true;
            btn.style.opacity = "0.5";
            btn.style.cursor = "default";

            // Selesai (Opsional, tombol hilang)
            setTimeout(() => {
                btn.style.display = 'none';
            }, 5500);
        }
    </script>

</body>
</html>
